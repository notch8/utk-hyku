<% if user_signed_in? %>
  <ul class="nav navbar-nav">
    <% if can? :manage, Account %>
      <li>
        <%= link_to main_app.accounts_path do %>
          <span class="fa fa-gears"></span> Accounts
        <% end %>
      </li>
    <% end %>

    <% if can? :manage, Feature %>
      <li>
        <%= link_to main_app.admin_features_path do %>
          <span class="fa fa-tasks"></span> Features
        <% end %>
      </li>
    <% end %>

    <% if can? :manage, Site.instance %>
      <li class="dropdown">
        <%= link_to sufia.admin_stats_path, role: 'button', data: { toggle: 'dropdown' }, aria: { haspopup: true, expanded: false } do %>
          <span class="fa fa-gear"></span> Admin <span class="caret"></span>
        <% end %>
        <ul class="dropdown-menu">
          <% if can? :manage, Site %>
            <li><%= link_to 'Settings', main_app.edit_site_path%></li>
          <% end %>

          <% if Site.account && can?(:manage, Site.account) %>
            <li><%= link_to 'Account', main_app.account_path(Site.account) %></li>
          <% end %>

          <% if can? :manage, Role %>
              <li><%= link_to 'User roles', main_app.site_roles_path %></li>
          <% end %>

          <% if Sufia::Engine.routes.url_helpers.respond_to? :admin_stats_path %>
            <li><%= link_to 'Repository statistics', sufia.admin_stats_path %></li>
          <% end %>

          <% if Sufia::Engine.routes.url_helpers.respond_to? :admin_queues_path %>
            <li><%= link_to 'Message queues', sufia.admin_queues_path %></li>
          <% end %>
        </ul>
      </li>
    <% end %>

    <li class="dropdown">
      <%= link_to sufia.dashboard_index_path, role: 'button', data: { toggle: 'dropdown' }, aria: { haspopup: true, expanded: false } do %>
        <span class="fa fa-tachometer"></span> Dashboard<span class="caret"></span>
      <% end %>
      <ul class="dropdown-menu">
        <li><%= link_to 'My Dashboard', sufia.dashboard_index_path %></li>
        <li class="divider"></li>
        <li><%= link_to 'Transfers', sufia.transfers_path %></li>
        <li class="divider"></li>
        <li><%= link_to 'Highlights', sufia.dashboard_highlights_path %></li>
        <li><%= link_to 'Shares', sufia.dashboard_shares_path %></li>
      </ul>
    </li>

    <% if can_ever_create_works? %>
      <li class="dropdown">
        <%= link_to sufia.dashboard_works_path, role: 'button', data: { toggle: 'dropdown' }, aria: { haspopup: true, expanded: false } do %>
          <span class="fa fa-cube"></span> Works <span class="caret"></span>
        <% end %>
        <ul class="dropdown-menu">
          <li><%= link_to 'My Works', sufia.dashboard_works_path %></li>
          <% classification = CurationConcerns::QuickClassificationQuery.new(current_user) %>
          <% classification.each do |concern| %>
            <li><%= link_to(
                  "#{t("sufia.toolbar.works.new")} #{concern.human_readable_type}",
                  new_polymorphic_path([main_app, concern]),
                  class: "item-option contextual-quick-classify #{dom_class(concern, 'new').gsub('_', '-')}",
                  role: 'menuitem'
                ) %>
            </li>
          <% end %>
          <li><%= link_to 'Batch Create', sufia.new_batch_upload_path %></li>
        </ul>
      </li>
    <% end %>

    <% if can?(:create, Collection) %>
      <li class="dropdown">
        <%= link_to sufia.dashboard_collections_path, role: 'button', data: { toggle: 'dropdown' }, aria: { haspopup: true, expanded: false } do %>
          <span class="fa fa-cubes"></span> Collections <span class="caret"></span>
        <% end %>
        <ul class="dropdown-menu">
          <li><%= link_to 'My Collections', sufia.dashboard_collections_path %></li>
          <li><%= link_to 'New Collection', main_app.new_collection_path %></li>
        </ul>
      </li>
    <% end %>
  </ul>
<% end %>
